- provide(:title, 'Users')
- if current_user.admin?
  - provide(:activemenu, 'list-clients')
- else
  - provide(:activemenu, 'users')

.row.users
  .col-md-8
    - if @users.present?
      %table.table
        %thead
          %th=t('User')
          %th=t('Email')
          %th=t('Projects')
          %th=t('Action')
        %tbody
          - @users.each do |user|
            - if current_user.id != user.id
              %tr
                %td
                  %a{:href => user_path(user)}= user.username || user.first_name || user.last_name || ''
                %td= user.email
                %td
                  %ul.project-list
                    - user.projects && user.projects.each do |project|
                      %li= project.name
                %td
                  = link_to user_path(user), :confirm => 'Are you sure?', :method => :delete, :class=>"btn btn-xs" do
                    %i.glyphicon.glyphicon-remove.text-danger{style: "font-size: 15pt;"}
                  - if current_user.admin?
                    - if user.allow_web_access
                      = link_to allow_access_user_path(user), :confirm => 'Are you sure to turn off web backend access for this client?', :method => :patch, :class=>"btn btn-xs" do
                        %i.glyphicon.glyphicon-thumbs-up.text-success{style: "font-size: 15pt;"}
                    - else
                      = link_to allow_access_user_path(user), :confirm => 'Are you sure to turn on web backend access for this client?', :method => :patch, :class=>"btn btn-xs" do
                        %i.glyphicon.glyphicon-ban-circle.text-danger{style: "font-size: 15pt;"}
    - else
      .alert.alert-info.text-center
        No user has been found.